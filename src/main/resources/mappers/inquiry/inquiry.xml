<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.care.bedu.inquiry.InquiryDao">
		
	<insert id="createInquiry" parameterType="com.care.bedu.inquiry.InquiryVo">
		INSERT INTO T_BEDU_VOC(
		  VOC_NUM,
		  TITLE,
		  CONTENT,
		  FILE_NAME,
		  FILE_TYPE,
		  USER_NAME,
		  REG_DATE,
		  REG_ID
		)VALUES(
	      #{voc_num},
	      #{title},
		  #{content},
		  #{file_name},
		  #{file_type},
		  #{commNum},
		  #{user_name},
		  SYSDATE,
		  #{reg_Id}
		)
	</insert>
	<select id="getAllInquiry" resultType="java.util.HashMap">
		SELECT
    			title,
    			writer,
    			content,
    			star,
    			reviewDate
		FROM
    		(
    			SELECT
        		TITLE AS title,
        		USER_NAME AS writer,
        		CONTENT AS content,
        		REG_DATE AS inquiryDate
    	FROM
       		 	T_BEDU_VOC
    	ORDER BY
        		REG_DATE DESC
    		) 
	</select>
	
	    <select id="getSearchedInquiry" resultType="java.util.HashMap">
  		SELECT 
    			TITLE as title,
    			USER_NAME as writer,	
   				CONTENT as content,
    			REG_DATE AS inquiryDate
  		FROM T_BEDU_VOC
  			WHERE
    			TITLE LIKE '%' || :keyword || '%' OR
    			CONTENT LIKE '%' || :keyword || '%' OR
    			USER_NAME LIKE '%' || :keyword || '%'
	</select>
	
	
</mapper>